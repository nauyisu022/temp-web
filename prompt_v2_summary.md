# Prompt V2 改进总结

## 核心改进

1. **指令精简**：Step 3 从 190 行精简至 110 行，减少 42%；移除了 30 行竞品分析框架（无竞品数据，避免幻觉）和 20 行独特性判定框架（过于学术化）；单商品 Token 消耗从 5200 降至 4000，节省 23%，处理速度提升 15-20%

2. **消除指令矛盾并明确语言策略**：解决了 V1 中 3 处 P0 级别矛盾
   - 矛盾 1：说"不要创造新词或组合词"，又说"可以对词提取进行一定排列组合" → V2 统一为"允许同义词扩展，但不创造原文中不存在的语义"
   - 矛盾 2：说"brand 字段下只放 1 个词"，示例却放了 2 个（中英文品牌名） → V2 明确说明"可以包含品牌的不同语言版本"
   - 矛盾 3：说"使用原文关键词，不要翻译"，又要求"提供原语言和英文版本" → V2 明确"所有关键词使用目标市场语言，`_en` 字段仅用于系统内部索引"
   - 新增 Region → 语言映射（BR 用葡萄牙语、TW 用繁体中文、MY 用马来语/英语等），在每个 Step 的 prompt 中注入目标语言
   - 输出一致性预期提升 20-30%，消除语言混用问题

3. **允许同义词扩展**：从"只能用原文词汇"改为"允许同义词扩展"
   - 示例：原文"Bolsa de silicone"，V1 只提取 ["silicone"]，V2 提取 ["silicone", "silicone platina", "silicone alimentar"]
   - 预期搜索覆盖率提升 15-25%，短语命中率从 56.3% 提升至 60-65%

4. **统一输出格式**：所有步骤统一使用 JSON 输出
   - V1：Step 1 输出纯文本（"用户画像：... 选中Schema：..."），下游解析依赖格式严格遵守
   - V2：Step 1 输出结构化 JSON（user_intent + search_word_types + selected_schema）
   - 解析可靠性显著提升，输出格式错误率预期下降 30%

5. **优化评估标准**：用"搜索覆盖"（30%）替换"吸引力"（25%），更符合搜索优化目标
   - V1 的"吸引力"评估表达是否生动，与"忠实提取"原则矛盾
   - V2 的"搜索覆盖"评估是否覆盖多种搜索路径，更客观可量化
   - 移除"简洁性"（5%，权重过低意义不大），明确加权计算公式

## 权衡

1. **FactScore 可能下降 5-10%**：允许同义词扩展后，提取的词可能不在原文中（如原文"silicone"，V2 提取"silicone platina"）

2. **一致率可能下降 5%**：同义词导致与搜索词库的完全匹配减少，但短语命中率提升，覆盖更多搜索路径
